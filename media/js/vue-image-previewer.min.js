!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VuePreviewer=t()}(this,function(){"use strict";var e={name:"Icon",props:{mode:{type:String,default:"svg"},type:{type:String,required:!0}}};var t,n=function(e,t,n,i,o,s,a,r,c,l){"boolean"!=typeof a&&(c=r,r=a,a=!1);var d,m="function"==typeof n?n.options:n;if(e&&e.render&&(m.render=e.render,m.staticRenderFns=e.staticRenderFns,m._compiled=!0,o&&(m.functional=!0)),i&&(m._scopeId=i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},m._ssrRegister=d):t&&(d=a?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),d)if(m.functional){var u=m.render;m.render=function(e,t){return d.call(t),u(e,t)}}else{var h=m.beforeCreate;m.beforeCreate=h?[].concat(h,d):[d]}return n},i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var o={};var s=function(e){return function(e,n){return function(e,n){var s=i?n.media||"default":e,a=o[s]||(o[s]={ids:new Set,styles:[]});if(!a.ids.has(e)){a.ids.add(e);var r=n.source;if(n.map&&(r+="\n/*# sourceURL="+n.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),a.element||(a.element=document.createElement("style"),a.element.type="text/css",n.media&&a.element.setAttribute("media",n.media),void 0===t&&(t=document.head||document.getElementsByTagName("head")[0]),t.appendChild(a.element)),"styleSheet"in a.element)a.styles.push(r),a.element.styleSheet.cssText=a.styles.filter(Boolean).join("\n");else{var c=a.ids.size-1,l=document.createTextNode(r),d=a.element.childNodes;d[c]&&a.element.removeChild(d[c]),d.length?a.element.insertBefore(l,d[c]):a.element.appendChild(l)}}}(e,n)}};var a=n({render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",this._g(this._b({},"span",this.$attrs,!1),this.$listeners),["svg"===this.mode?[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-"+this.type}})])]:[t("i",{staticClass:"icon iconfont",class:this.type})]],2)},staticRenderFns:[]},function(e){e&&e("data-v-55d2e452_0",{source:".icon[data-v-55d2e452]{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}",map:void 0,media:void 0})},e,"data-v-55d2e452",!1,void 0,s,void 0);const r={defaultWidth:"100px",defaultHeight:"75px",thumbnailStyle:{backgroundSize:"cover"},keyMap:{zoomin:"+",zoomout:"-",rotate:"r",prev:"ArrowLeft",next:"ArrowRight"}};var c=n({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"vue-preview",on:{keydown:e.onKey}},[n("section",{staticClass:"list",on:{click:e.onImageClick}},e._l(e.imageList,function(t,i){return n("span",{key:i,staticClass:"list__img"},["image"===e.mode?[n("img",{style:e.componentOptions.thumbnailStyle,attrs:{src:t.thumbnailSrc,width:t.width,height:t.height,"data-index":i}})]:[n("span",{staticClass:"link",attrs:{name:"img","data-index":i}},[e._v(e._s(t.name))])]],2)}),0),~e.currentIndex&&e.isShowPre?n("div",{staticClass:"pre-container"},[n("header",{staticClass:"pre__header"},[n("div",[e._v(e._s(e.currentIndex+1)+"/"+e._s(e.imageList.length))]),n("section",[e.inIframe?e._e():n("icon",{staticClass:"icon",attrs:{type:"zoom"},on:{click:e.toggleFullscreen}}),n("icon",{staticClass:"icon",attrs:{type:"zoomin"},on:{click:e.zoomin}}),n("icon",{staticClass:"icon",attrs:{type:"zoomout"},on:{click:e.zoomout}}),n("icon",{staticClass:"icon",attrs:{type:"rotate"},on:{click:e.rotate}}),n("icon",{staticClass:"icon",attrs:{type:"close"},on:{click:e.close}})],1)]),n("div",{staticClass:"pre__content",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.close(t)}}},[e.currentIndex?n("icon",{staticClass:"prev",attrs:{type:"prev"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.prevClick(t)}}}):e._e(),e.currentIndex<e.imageList.length-1?n("icon",{staticClass:"next",attrs:{type:"next"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.nextClick(t)}}}):e._e(),n("span",{ref:"selectImg",style:{cursor:e.cursorStyle,transform:"scale("+e.scaleRate+") rotate("+e.rotateRate+"deg)"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.imageClick(t)}}},[n("img",{ref:"img",attrs:{src:e.imageList[e.currentIndex].src},on:{load:e.onImageLoad}})])],1),e.showFooter?n("div",{staticClass:"pre__footer"},[e._t("footer",[n("div",{staticClass:"footer"},[e._v(e._s(e.imageList[e.currentIndex].name))])],{image:e.imageList[e.currentIndex]})],2):e._e()]):e._e()])},staticRenderFns:[]},function(e){e&&e("data-v-28978cd5_0",{source:".link[data-v-28978cd5]{margin-right:8px;cursor:pointer;color:#20a0ff}.pre-container[data-v-28978cd5]{z-index:1000;position:fixed;top:0;left:0;right:0;margin:0;background-color:#0e0e0e}.pre__header[data-v-28978cd5]{z-index:1010;position:fixed;top:0;display:flex;justify-content:space-between;width:calc(100% - 16px);padding:8px;max-height:10%;color:rgba(255,255,255,.7);font-size:16px}.icon[data-v-28978cd5]{font-size:16px;cursor:pointer;margin-right:8px;padding:4px}.icon[data-v-28978cd5]:hover{color:darken(white,10)}.pre__footer[data-v-28978cd5]{z-index:1010;position:fixed;bottom:0;display:flex;width:100%;max-height:10%;background-color:rgba(0,0,0,.3)}.pre__content[data-v-28978cd5]{display:flex;width:100vw;height:100vh;align-items:center;justify-content:center;overflow:auto}*[data-v-28978cd5]{transition:all .3s ease}.select-img[data-v-28978cd5]{transition:rotate 0s ease}.pre__content[data-v-28978cd5]::-webkit-scrollbar{display:none}.next[data-v-28978cd5],.prev[data-v-28978cd5]{cursor:pointer;z-index:1010;position:fixed;color:rgba(255,255,255,.7);font-size:16px;padding:16px;border-radius:50%}.next[data-v-28978cd5]:hover,.prev[data-v-28978cd5]:hover{color:darken(white,10);background-color:rgba(255,255,255,.5)}.prev[data-v-28978cd5]{left:16px}.next[data-v-28978cd5]{right:16px}.list__img[data-v-28978cd5]{cursor:pointer;margin:8px 4px}.pre__footer[data-v-28978cd5]{display:flex;justify-content:center;color:#fff;padding:8px}",map:void 0,media:void 0})},{name:"VuePreviewer",props:{images:{type:Array,default:()=>[]},mode:{type:String,default:"image"},options:{type:Object,default:()=>({})},showFooter:{type:Boolean,default:!0}},components:{Icon:a},data:()=>({inIframe:window.self!==window.top,currentIndex:-1,isShowPre:!1,scaleRate:1,rotateRate:0,cursorStyle:"zoom-in"}),computed:{imageList(){return this.normalizeImage(this.images,{sWidth:this.componentOptions.defaultWidth,sHeight:this.componentOptions.defaultHeight})},componentOptions(){return{...this.$global_vue_image_previewer_options,...r,...this.options}}},mounted(){document.addEventListener("keydown",this.onKey)},destroyed(){document.removeEventListener("keydown",this.onKey)},methods:{onKey(e){const{keyMap:t={}}=this.componentOptions;switch(e.key){case t.prev:this.prevClick();break;case t.next:this.nextClick();break;case t.zoomin:this.zoomin();break;case t.zoomout:this.zoomout();break;case t.rotate:this.rotate()}},onImageLoad(){const e=document.documentElement.clientHeight,t=document.documentElement.clientWidth,n=this.$refs.img;if(n){const{width:i,height:o}=n.getBoundingClientRect(),s=i/t,a=o/e;s>1&&a>1?s>a?n.style.width=`${t}px`:n.style.height=`${e}px`:s>1?n.style.width=`${t}px`:a>1&&(n.style.height=`${e}px`)}},normalizeImage:(e,{sWidth:t,sHeight:n})=>e.map((e,i)=>"string"==typeof e?{width:t,height:n,src:e,thumbnailSrc:e,name:`Image ${i+1}`}:{width:e.width||t,height:e.height||n,src:e.src,thumbnailSrc:e.thumbnailSrc||e.src,name:e.name}),onImageClick({target:e}){"IMG"!==e.nodeName&&"img"!==e.getAttribute("name")||(this.currentIndex=+e.dataset.index,this.isShowPre=!0,this.$nextTick(()=>{this.$refs.selectImg.focus()}),this.$emit("select",this.imageList[this.currentIndex]))},zoomin(){this.scaleRate+=.5},zoomout(){this.scaleRate-=.25,this.scaleRate=Math.max(this.scaleRate,.25)},rotate(){this.rotateRate+=90},toggleFullscreen(){document.fullscreenElement||document.msFullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||!1?this.exitFullscreen():this.enterFullscreen()},exitFullscreen(){const e=document.documentElement,t=e.cancelFullscreen||e.webkitExitFullscreen||e.mozCancelFullscreen||e.exitFullscreen;t?t.call(e):console.error("Your browser seems doesn't support fullscreen")},enterFullscreen(){const e=document.documentElement,t=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullscreen||e.msRequestFullscreen;t?t.call(e):console.error("Your browser seems doesn't support fullscreen")},imageClick(){"zoom-in"===this.cursorStyle?(this.cursorStyle="zoom-out",this.scaleRate+=.5):(this.cursorStyle="zoom-in",this.scaleRate-=.5)},prevClick(){const e=(this.$refs.selectImg||{}).classList;this.currentIndex>0&&(e&&e.add("select-img"),this.currentIndex-=1,this.resetRate(),setTimeout(()=>{e&&e.remove("select-img")}))},nextClick(){const e=(this.$refs.selectImg||{}).classList;this.currentIndex<this.imageList.length-1&&(e&&e.add("select-img"),this.currentIndex+=1,this.resetRate(),setTimeout(()=>{e&&e.remove("select-img")}))},close(){this.currentIndex=-1,this.isShowPre=!1,this.resetRate(),this.$emit("close")},resetRate(){this.scaleRate=1,this.rotateRate=0}}},"data-v-28978cd5",!1,void 0,s,void 0);return function(e){var t,n='<svg><symbol id="icon-zoom" viewBox="0 0 1024 1024"><path d="M233.1859 621.052718 126.190027 621.052718l0 275.717575 275.717575 0 0-111.110587L237.300614 785.659707 237.300614 621.052718 233.1859 621.052718zM126.190027 398.831544l111.110587 0L237.300614 234.224556l164.608012 0L401.908626 127.228683 126.190027 127.228683 126.190027 398.831544zM784.621051 785.659707 620.014062 785.659707l0 111.110587 275.717575 0L895.731638 621.052718l-111.110587 0L784.621051 785.659707zM620.014062 127.228683l0 111.110587 164.608012 0 0 164.608012 111.110587 0L895.732661 127.228683 620.014062 127.228683z"  ></path></symbol><symbol id="icon-zoomout" viewBox="0 0 1024 1024"><path d="M232.727273 465.454545h372.363636V372.363636H232.727273v93.090909z m513.303272 214.760728A416.721455 416.721455 0 0 0 837.818182 418.909091c0-231.377455-187.531636-418.909091-418.909091-418.909091S0 187.531636 0 418.909091s187.531636 418.909091 418.909091 418.909091c98.909091 0 189.626182-34.443636 261.306182-91.787637l209.780363 209.780364 65.815273-65.815273-209.780364-209.780363zM418.909091 744.727273A325.818182 325.818182 0 1 1 418.909091 93.090909a325.818182 325.818182 0 0 1 0 651.636364z"  ></path></symbol><symbol id="icon-zoomin" viewBox="0 0 1024 1024"><path d="M1002.0864 923.2896l-207.0016-207.0528a441.856 441.856 0 0 0 39.2192-59.7504 437.3504 437.3504 0 0 0 52.9408-209.2032 438.8352 438.8352 0 1 0-171.9808 348.3136l207.2576 207.2064a56.064 56.064 0 0 0 79.5136 0c22.016-21.9648 22.016-57.5488 0-79.5136zM99.584 447.2832a349.184 349.184 0 0 1 348.8256-348.8256 349.184 349.184 0 0 1 348.8256 348.8256 349.184 349.184 0 0 1-348.8256 348.8256 349.2352 349.2352 0 0 1-348.8256-348.8256z"  ></path><path d="M605.952 402.2784H493.4144V289.792a45.056 45.056 0 0 0-90.0096 0v112.5376H290.8672a45.056 45.056 0 0 0 0 90.0096H403.456v112.5376a45.056 45.056 0 0 0 90.0096 0V492.288h112.5376a45.056 45.056 0 0 0 0-90.0096z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M520.52000029 456.89000029L159.92 96.29a45 45 0 1 0-63.65999971 63.60000029l360.59999942 360.63-360.59999942 360.63a45 45 0 1 0 63.63 63.63l360.63-360.60000029 360.63 360.60000029a45 45 0 1 0 63.63-63.60000029l-360.60000029-360.65999971 360.60000029-360.60000029a45 45 0 1 0-63.63-63.63l-360.60000029 360.60000029z"  ></path></symbol><symbol id="icon-rotate" viewBox="0 0 1024 1024"><path d="M480 32a32 32 0 0 0 32 32c119.664 0 232.16 46.608 316.768 131.232C913.392 279.84 960 392.336 960 512c0 118.096-45.472 229.168-128 313.392V736a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-76.416C974.16 768.512 1024 644.112 1024 512c0-136.752-53.264-265.328-149.984-362.032C777.328 53.264 648.752 0 512 0a32 32 0 0 0-32 32zM149.984 874.032C246.672 970.736 375.248 1024 512 1024a32 32 0 0 0 0-64c-119.664 0-232.16-46.608-316.768-131.232C110.608 744.16 64 631.664 64 512c0-118.096 45.472-229.168 128-313.392V288a32 32 0 0 0 64 0V96H64a32 32 0 0 0 0 64h76.416C49.84 255.488 0 379.888 0 512c0 136.752 53.264 265.328 149.984 362.032z" fill="" ></path></symbol><symbol id="icon-next" viewBox="0 0 1024 1024"><path d="M993.24928 514.63168v0.12288c0 5.51936-320.39424 337.38752-320.39424 337.38752a43.35104 43.35104 0 0 1-31.04256 13.04576c-10.78272 0-21.632-4.26496-29.97248-12.29312-17.18272-16.3072-17.61792-43.83744-1.06496-60.83072l218.05056-236.04736H73.9584c-23.89504 0-43.20768-19.18976-43.20768-42.77248 0-23.7056 19.31264-42.89536 43.20768-42.89536h754.86208l-217.98912-236.17024c-16.54784-17.02912-16.0512-45.15328 1.13152-61.55264 17.18272-16.43008 44.71296-19.3792 61.2096-2.47296 0 0 320.0768 339.0208 320.0768 344.47872z"  ></path></symbol><symbol id="icon-prev" viewBox="0 0 1024 1024"><path d="M350.82752 170.15296c16.49664-16.90112 44.02688-13.95712 61.2096 2.47296 17.1776 16.39936 17.67936 44.52352 1.13152 61.55264L195.17952 470.35392h754.86208c23.89504 0 43.20768 19.18976 43.20768 42.89536 0 23.5776-19.31264 42.77248-43.20768 42.77248H195.17952L413.23008 792.064c16.55296 16.99328 16.11776 44.52352-1.06496 60.83072-8.3456 8.02816-19.18976 12.29312-29.97248 12.29312a43.33056 43.33056 0 0 1-31.04256-13.04576S30.75584 520.27392 30.75584 514.75456v-0.12288c-0.00512-5.45792 320.07168-344.47872 320.07168-344.47872z"  ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{var n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()};document.addEventListener("DOMContentLoaded",n,!1)}else document.attachEvent&&(o=t,s=e.document,a=!1,(r=function(){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(r,50)}i()})(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,i())});function i(){a||(a=!0,o())}var o,s,a,r}(function(){var e,t;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)}(t,document.body))})}(window),c.install=function e(t,n){e.installed||(t.prototype.$global_vue_image_previewer_options=n,e.installed=!0,t.component(c.name,c))},c});
